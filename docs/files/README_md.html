<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>README.md</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>README.md
</h1>
<div class='paths'>
README.md
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2017-12-16 14:56:59 +0100</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-Evnt"><a href="../classes/Evnt.html">Evnt</a><span><a href="#label-Evnt">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>CQRS and Event Driven Development architecture for Ruby projects.</p>
<ul><li>
<p><a href="#installation">Installation</a></p>
</li><li>
<p><a href="#structure">Structure</a></p>
</li><li>
<p><a href="#command">Command</a></p>
</li><li>
<p><a href="#event">Event</a></p>
</li><li>
<p><a href="#handler">Handler</a></p>
</li><li>
<p><a href="#rails-integration">Rails integration</a></p>
</li><li>
<p><a href="#development">Development</a></p>
</li></ul>

<p>Full documentation here: <a
href="https://ideonetwork.github.io/ruby-evnt">ideonetwork.github.io/ruby-evnt</a>/</p>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To use the gem you need to add it on your Gemfile</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;evnt&#39;</span></pre>

<h2 id="label-Structure">Structure<span><a href="#label-Structure">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../classes/Evnt.html">Evnt</a> is developed to be used over all
kinds of projects and frameworks (like Ruby on Rails or Sinatra), so it
contains only three types of entities:</p>
<ul><li>
<p>Command</p>
</li><li>
<p>Event</p>
</li><li>
<p>Handler</p>
</li></ul>

<h3 id="label-Command">Command<span><a href="#label-Command">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Commands are used to run single tasks on the system. It&#39;s like a
controller on an MVC architecture without the communication with the
client.</p>

<p>Every command has three steps to execute:</p>
<ul><li>
<p>The params validation which validates the parameters used to run the
command.</p>
</li><li>
<p>The logic validation which checks the command can be executed in compliance
with the system rules.</p>
</li><li>
<p>The event intialization which initializes an event object used to save the
command.</p>
</li></ul>

<p>An example of command should be:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">CreateOrderCommand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Evnt</span><span class="ruby-operator">::</span><span class="ruby-constant">Command</span>&#x000A;&#x000A;  <span class="ruby-identifier">to_validate_params</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-comment"># check params presence</span>&#x000A;    <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;User should be present&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">user_id</span>].<span class="ruby-identifier">blank?</span>&#x000A;    <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;Product should be present&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">product_id</span>].<span class="ruby-identifier">blank?</span>&#x000A;    <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;Quantity should be present&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>].<span class="ruby-identifier">blank?</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">to_validate_logic</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">user_id</span>])&#x000A;    <span class="ruby-ivar">@product</span> = <span class="ruby-constant">Product</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">product_id</span>])&#x000A;&#x000A;    <span class="ruby-comment"># check user exist</span>&#x000A;    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@user</span>&#x000A;      <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;The user does not exist&#39;</span>&#x000A;      <span class="ruby-keyword">break</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;    <span class="ruby-comment"># check product exist</span>&#x000A;    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@product</span>&#x000A;      <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;The product does not exist&#39;</span>&#x000A;      <span class="ruby-keyword">break</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;    <span class="ruby-comment"># check quantity exist for the product</span>&#x000A;    <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;The requested quantity is not available&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">quantity</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>]&#x000A;&#x000A;    <span class="ruby-comment"># check user has money to buy the product</span>&#x000A;    <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;You do not have enought money&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">money</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">price</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">to_initialize_events</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-comment"># generate order id</span>&#x000A;    <span class="ruby-identifier">order_id</span> = <span class="ruby-constant">SecureRandom</span>.<span class="ruby-identifier">uuid</span>&#x000A;&#x000A;    <span class="ruby-comment"># initialize event</span>&#x000A;    <span class="ruby-keyword">begin</span>&#x000A;      <span class="ruby-constant">CreateOrderEvent</span>.<span class="ruby-identifier">new</span>(&#x000A;        <span class="ruby-identifier">order_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">order_id</span>,&#x000A;        <span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>,&#x000A;        <span class="ruby-identifier">product_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">id</span>,&#x000A;        <span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>],&#x000A;        <span class="ruby-identifier">_user</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>,&#x000A;        <span class="ruby-identifier">_product</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@product</span>&#x000A;      )&#x000A;    <span class="ruby-keyword">rescue</span>&#x000A;      <span class="ruby-identifier">err</span> <span class="ruby-string">&#39;Sorry, there was an error&#39;</span>, <span class="ruby-identifier">code</span><span class="ruby-operator">:</span> <span class="ruby-value">500</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>

<p>An example of command usage should be:</p>

<pre class="ruby"><span class="ruby-identifier">command</span> = <span class="ruby-constant">CreateOrderCommand</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-value">128</span>,&#x000A;  <span class="ruby-identifier">product_id</span><span class="ruby-operator">:</span> <span class="ruby-value">534</span>,&#x000A;  <span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-value">10</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-keyword">if</span> <span class="ruby-identifier">command</span>.<span class="ruby-identifier">completed?</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;Command completed&#39;</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">command</span>.<span class="ruby-identifier">params</span> <span class="ruby-comment"># -&gt; { user_id: 128, product_id: 534, quantity: 10 }</span>&#x000A;<span class="ruby-keyword">else</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">command</span>.<span class="ruby-identifier">errors</span> <span class="ruby-comment"># array of hashes with a { message, code } structure</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">command</span>.<span class="ruby-identifier">error_messages</span> <span class="ruby-comment"># array of error messages</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">command</span>.<span class="ruby-identifier">error_codes</span> <span class="ruby-comment"># array of error codes</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>It&#39;s also possible to use err method inside the command to raise an
exception with the option <strong>exception: true</strong>. An example of
usage should be:</p>

<pre class="ruby"><span class="ruby-keyword">begin</span>&#x000A;  <span class="ruby-identifier">command</span> = <span class="ruby-constant">CreateOrderCommand</span>.<span class="ruby-identifier">new</span>(&#x000A;    <span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-value">128</span>,&#x000A;    <span class="ruby-identifier">product_id</span><span class="ruby-operator">:</span> <span class="ruby-value">534</span>,&#x000A;    <span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-value">10</span>,&#x000A;    <span class="ruby-identifier">_options</span><span class="ruby-operator">:</span> {&#x000A;      <span class="ruby-identifier">excption</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>&#x000A;    }&#x000A;  )&#x000A;<span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>Some validations are similar for every command (like presence or paramter
type), so you can also use general validations instead of
<strong>to_validate_params</strong> block. An example of general
validations should be:</p>

<pre class="ruby">&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">CreateOrderCommand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Evnt</span><span class="ruby-operator">::</span><span class="ruby-constant">Command</span>&#x000A;&#x000A;  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">integer</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">product_id</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">integer</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">quantity</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">integer</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>&#x000A;&#x000A;  <span class="ruby-comment"># ...</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>

<h3 id="label-Event">Event<span><a href="#label-Event">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Events are used to save on a persistent data structure what happends on the
system.</p>

<p>Every event has three informations:</p>
<ul><li>
<p>The <strong>name</strong> is an unique identifier of the event.</p>
</li><li>
<p>The <strong>attributes</strong> are the list of attributes required from
the event to be saved.</p>
</li><li>
<p>The <strong>handlers</strong> are a list of handler objects which will be
notified when the event is completed.</p>
</li></ul>

<p>Every event has also a single function used to write the event information
on the data structure.</p>

<p>An example of event should be:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">CreateOrderEvent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Evnt</span><span class="ruby-operator">::</span><span class="ruby-constant">Event</span>&#x000A;&#x000A;  <span class="ruby-identifier">name_is</span> :<span class="ruby-identifier">create_order</span>&#x000A;&#x000A;  <span class="ruby-identifier">attributes_are</span> :<span class="ruby-identifier">order_id</span>, :<span class="ruby-identifier">user_id</span>, :<span class="ruby-identifier">product_id</span>, :<span class="ruby-identifier">quantity</span>&#x000A;&#x000A;  <span class="ruby-identifier">handlers_are</span> [&#x000A;    <span class="ruby-constant">ProductHandler</span>.<span class="ruby-identifier">new</span>,&#x000A;    <span class="ruby-constant">UserNotifierHandler</span>.<span class="ruby-identifier">new</span>&#x000A;  ]&#x000A;&#x000A;  <span class="ruby-identifier">to_write_event</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-comment"># save event on database</span>&#x000A;    <span class="ruby-constant">Event</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">payload</span><span class="ruby-operator">:</span> <span class="ruby-identifier">payload</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>

<p>An example of event usage should be:</p>

<pre class="ruby"><span class="ruby-identifier">event</span> = <span class="ruby-constant">CreateOrderEvent</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-identifier">order_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">order_id</span>,&#x000A;  <span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>,&#x000A;  <span class="ruby-identifier">product_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">id</span>,&#x000A;  <span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>]&#x000A;)&#x000A;&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">name</span> <span class="ruby-comment"># -&gt; :create_order</span>&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">attributes</span> <span class="ruby-comment"># -&gt; [:order_id, :user_id, :product_id, :quantity]</span>&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">payload</span> <span class="ruby-comment"># -&gt; { order_id: 1, user_id: 128, product_id: 534, quantity: 10, evnt: { timestamp: 2017010101, name: &#39;create_order&#39; } }</span></pre>

<p>The event payload should contain all event attributes and a reserver
attributes “evnt” used to store the event timestamp and the event name.</p>

<p>It&#39;s also possible to give datas to the event without save them on the
event payload, to do this you shuld only use a key with “_” as first
character. An example should be:</p>

<pre class="ruby"><span class="ruby-identifier">event</span> = <span class="ruby-constant">CreateOrderEvent</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-identifier">order_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">order_id</span>,&#x000A;  <span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>,&#x000A;  <span class="ruby-identifier">product_id</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">id</span>,&#x000A;  <span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>],&#x000A;  <span class="ruby-identifier">_total_price</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[:<span class="ruby-identifier">quantity</span>] <span class="ruby-operator">*</span> <span class="ruby-ivar">@product</span>.<span class="ruby-identifier">price</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">payload</span> <span class="ruby-comment"># -&gt; { order_id: 1, user_id: 128, product_id: 534, quantity: 10, evnt: { timestamp: 2017010101, name: &#39;create_order&#39; } }</span>&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">extras</span> <span class="ruby-comment"># -&gt; { total_price: 50 }</span></pre>

<p>After the execution of the <strong>to_write_event</strong> block the event
object should notify all its handlers.</p>

<p>Sometimes you need to reload an old event to notify handlers to re-build
queries from events. To initialize a new event object with the payload of
an old event you can pass the old event payload to the event constructor:</p>

<pre class="ruby"><span class="ruby-identifier">events</span> = <span class="ruby-constant">Event</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;create_order&#39;</span>)&#x000A;<span class="ruby-identifier">reloaded_event</span> = <span class="ruby-constant">CreateOrderEvent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">events</span>.<span class="ruby-identifier">sample</span>.<span class="ruby-identifier">payload</span>)&#x000A;&#x000A;<span class="ruby-identifier">puts</span> <span class="ruby-identifier">reloaded_event</span>.<span class="ruby-identifier">reloaded?</span> <span class="ruby-comment"># -&gt; true</span></pre>

<h3 id="label-Handler">Handler<span><a href="#label-Handler">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Handlers are used to listen one or more events and run tasks after their
execution.</p>

<p>Every handler event management has two steps to execute:</p>
<ul><li>
<p>The queries update which updates temporary data structures used to read
datas.</p>
</li><li>
<p>The manage event code which run other tasks like mailers, parallel
executions ecc.</p>
</li></ul>

<p>An example of handler shuould be:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">ProductHandler</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Evnt</span><span class="ruby-operator">::</span><span class="ruby-constant">Handler</span>&#x000A;&#x000A;  <span class="ruby-identifier">on</span> :<span class="ruby-identifier">create_order</span> <span class="ruby-keyword">do</span>&#x000A;&#x000A;    <span class="ruby-identifier">to_update_queries</span> <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-comment"># update product quantity</span>&#x000A;      <span class="ruby-identifier">product</span> = <span class="ruby-identifier">event</span>.<span class="ruby-identifier">extras</span>[:<span class="ruby-identifier">product</span>]&#x000A;      <span class="ruby-identifier">product</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">quantity</span><span class="ruby-operator">:</span> <span class="ruby-identifier">product</span>.<span class="ruby-identifier">quantity</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">payload</span>[:<span class="ruby-identifier">quantity</span>])&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;    <span class="ruby-identifier">to_manage_event</span> <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-comment"># this block is called only for not reloaded events</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>

<p>The execution of <strong>to_update_queries</strong> block runs after every
events initialization. The execution of <strong>to_manage_event</strong>
block runs only for not reloaded events initialization.</p>

<p>Sometimes you need to run some code to manage only reloaded events. To run
code only for reloaded events you can use the
<strong>to_manage_reloaded_event</strong> block:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">ProductHandler</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Evnt</span><span class="ruby-operator">::</span><span class="ruby-constant">Handler</span>&#x000A;&#x000A;  <span class="ruby-identifier">on</span> :<span class="ruby-identifier">create_order</span> <span class="ruby-keyword">do</span>&#x000A;&#x000A;    <span class="ruby-identifier">to_manage_reloaded_event</span> <span class="ruby-keyword">do</span>&#x000A;      <span class="ruby-comment"># this block is called only for reloaded events</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>

<h2 id="label-Rails+integration">Rails integration<span><a href="#label-Rails+integration">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../classes/Evnt.html">Evnt</a> can be used with Ruby on Rails to
extends the MVC pattern.</p>

<p>To use the gem with Rails you need to create three folders inside the ./app
project&#39;s path:</p>
<ul><li>
<p><strong>./app/commands</strong></p>
</li><li>
<p><strong>./app/events</strong></p>
</li><li>
<p><strong>./app/handlers</strong></p>
</li></ul>

<p>You also need to require all files from these folders. To do this you need
to edit the ./config/application.rb file like this example:</p>

<pre class="ruby">&#x000A;<span class="ruby-identifier">require_relative</span> <span class="ruby-string">&#39;boot&#39;</span>&#x000A;&#x000A;<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rails/all&#39;</span>&#x000A;&#x000A;<span class="ruby-comment"># Require the gems listed in Gemfile, including any gems</span>&#x000A;<span class="ruby-comment"># you&#39;ve limited to :test, :development, or :production.</span>&#x000A;<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">require</span>(<span class="ruby-operator">*</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">groups</span>)&#x000A;&#x000A;<span class="ruby-keyword">module</span> <span class="ruby-constant">MyApplicationName</span>&#x000A;  <span class="ruby-keyword">class</span> <span class="ruby-constant">Application</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>&#x000A;&#x000A;    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">autoload_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;app/commands&#39;</span>)&#x000A;    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">autoload_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;app/events&#39;</span>)&#x000A;    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">autoload_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;app/handlers&#39;</span>)&#x000A;&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<h2 id="label-Development">Development<span><a href="#label-Development">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To update the documentation run:</p>

<pre>rdoc --op docs -f hanna</pre>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
